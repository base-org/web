"use strict";(self.webpackChunk_app_base_docs=self.webpackChunk_app_base_docs||[]).push([[2074],{30876:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(2784);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(n),h=o,m=d["".concat(l,".").concat(h)]||d[h]||c[h]||r;return n?a.createElement(m,s(s({ref:t},p),{},{components:n})):a.createElement(m,s({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:o,s[1]=i;for(var u=2;u<r;u++)s[u]=n[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},79283:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>u});var a=n(7896),o=(n(2784),n(30876));const r={title:"Running a Base Node",slug:"/run-a-base-node",description:"A tutorial that teaches how to set up and run a Base Node.",author:"taycaldwell & wbnns",keywords:["Base Node setup","running a node","Base node","run a Base node","hardware requirements","node synchronization","node snapshots","Base chain","Base blockchain","Base network","node deployment","Ethereum node"],tags:["nodes"],difficulty:"beginner",displayed_sidebar:null},s=void 0,i={unversionedId:"docs/run-a-base-node",id:"docs/run-a-base-node",title:"Running a Base Node",description:"A tutorial that teaches how to set up and run a Base Node.",source:"@site/tutorials/docs/0_run-a-base-node.md",sourceDirName:"docs",slug:"/run-a-base-node",permalink:"/tutorials/run-a-base-node",draft:!1,tags:[{label:"nodes",permalink:"/tutorials/tags/nodes"}],version:"current",sidebarPosition:0,frontMatter:{title:"Running a Base Node",slug:"/run-a-base-node",description:"A tutorial that teaches how to set up and run a Base Node.",author:"taycaldwell & wbnns",keywords:["Base Node setup","running a node","Base node","run a Base node","hardware requirements","node synchronization","node snapshots","Base chain","Base blockchain","Base network","node deployment","Ethereum node"],tags:["nodes"],difficulty:"beginner",displayed_sidebar:null}},l={},u=[{value:"Objectives",id:"objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Hardware requirements",id:"hardware-requirements",level:3},{value:"Docker",id:"docker",level:3},{value:"L1 RPC URL",id:"l1-rpc-url",level:3},{value:"Running a Node",id:"running-a-node",level:2},{value:"Snapshots",id:"snapshots",level:3},{value:"Restoring from snapshot",id:"restoring-from-snapshot",level:4},{value:"Syncing",id:"syncing",level:3}],p={toc:u},d="wrapper";function c(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This tutorial will walk you through setting up your own ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/base-org/node"},"Base Node"),"."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"objectives"},"Objectives"),(0,o.kt)("p",null,"By the end of this tutorial you should be able to:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Deploy and sync a Base node")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Running a node is time consuming, resource expensive, and potentially costly. If you don't already know why you want to run your own node, you probably don't need to."),(0,o.kt)("br",null),(0,o.kt)("p",{parentName:"admonition"},"If you're just getting started and need an RPC URL, you can use our free endpoints:"),(0,o.kt)("br",null),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Mainnet"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"https://mainnet.base.org")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Testnet (Sepolia)"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"https://sepolia.base.org"))),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"Note:")," Our RPCs are rate-limited, they are not suitable for production apps."),(0,o.kt)("p",{parentName:"admonition"},"If you're looking to harden your app and avoid rate-limiting for your users, please check out one of our ",(0,o.kt)("a",{parentName:"p",href:"/tools/node-providers"},"partners"),".")),(0,o.kt)("h3",{id:"hardware-requirements"},"Hardware requirements"),(0,o.kt)("p",null,"We recommend you have this configuration to run a node:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"8-Core CPU"),(0,o.kt)("li",{parentName:"ul"},"at least 16 GB RAM"),(0,o.kt)("li",{parentName:"ul"},"an SSD drive (NVME recommended) with at least 750GB (full node) or 4.5TB (archive node) free")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"If utilizing Amazon Elastic Block Store (EBS), ensure timing buffered disk reads are fast enough in order to avoid latency issues alongside the rate of new blocks added to Base during the initial synchronization process.")),(0,o.kt)("h3",{id:"docker"},"Docker"),(0,o.kt)("p",null,"This tutorial assumes you are familiar with ",(0,o.kt)("a",{parentName:"p",href:"https://www.docker.com/"},"Docker")," and have it running on your machine."),(0,o.kt)("h3",{id:"l1-rpc-url"},"L1 RPC URL"),(0,o.kt)("p",null,"You'll need your own L1 RPC URL. This can be one that you run yourself, or via a third-party provider, such as our ",(0,o.kt)("a",{parentName:"p",href:"/tools/node-providers"},"partners"),"."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"running-a-node"},"Running a Node"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Clone the ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/base-org/node"},"repo"),"."),(0,o.kt)("li",{parentName:"ol"},"Ensure you have an Ethereum L1 full node RPC available (not Base), and set ",(0,o.kt)("inlineCode",{parentName:"li"},"OP_NODE_L1_ETH_RPC")," & ",(0,o.kt)("inlineCode",{parentName:"li"},"OP_NODE_L1_BEACON")," (in the ",(0,o.kt)("inlineCode",{parentName:"li"},".env.*")," file if using ",(0,o.kt)("inlineCode",{parentName:"li"},"docker-compose"),"). If running your own L1 node, it needs to be synced before Base will be able to fully sync."),(0,o.kt)("li",{parentName:"ol"},"Uncomment the line relevant to your network (",(0,o.kt)("inlineCode",{parentName:"li"},".env.sepolia"),", or ",(0,o.kt)("inlineCode",{parentName:"li"},".env.mainnet"),") under the 2 ",(0,o.kt)("inlineCode",{parentName:"li"},"env_file")," keys in ",(0,o.kt)("inlineCode",{parentName:"li"},"docker-compose.yml"),"."),(0,o.kt)("li",{parentName:"ol"},"Run ",(0,o.kt)("inlineCode",{parentName:"li"},"docker compose up"),". Confirm you get a response from:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl -d \'{"id":0,"jsonrpc":"2.0","method":"eth_getBlockByNumber","params":["latest",false]}\' \\\n  -H "Content-Type: application/json" http://localhost:8545\n')),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Syncing your node may take ",(0,o.kt)("strong",{parentName:"p"},"days")," and will consume a vast amount of your requests quota. Be sure to monitor usage and up your plan if needed.")),(0,o.kt)("h3",{id:"snapshots"},"Snapshots"),(0,o.kt)("p",null,"If you're a prospective or current Base Node operator and would like to restore from a snapshot to save time on the initial sync, it's possible to always get the latest available snapshot of the Base chain on mainnet and/or testnet by using the following CLI commands. The snapshots are updated every week."),(0,o.kt)("h4",{id:"restoring-from-snapshot"},"Restoring from snapshot"),(0,o.kt)("p",null,"In the home directory of your Base Node, create a folder named ",(0,o.kt)("inlineCode",{parentName:"p"},"geth-data"),". If you already have this folder, remove it to clear the existing state and then recreate it. Next, run the following code and wait for the operation to complete."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Testnet (Full)")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"wget https://sepolia-full-snapshots.base.org/$(curl https://sepolia-full-snapshots.base.org/latest)\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Testnet (Archive)")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"wget https://sepolia-archive-snapshots.base.org/$(curl https://sepolia-archive-snapshots.base.org/latest)\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Mainnet (Full)")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"wget https://mainnet-full-snapshots.base.org/$(curl https://mainnet-full-snapshots.base.org/latest)\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Mainnet (Archive)")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"wget https://mainnet-archive-snapshots.base.org/$(curl https://mainnet-archive-snapshots.base.org/latest)\n")),(0,o.kt)("p",null,"You'll then need to untar the downloaded snapshot and place the ",(0,o.kt)("inlineCode",{parentName:"p"},"geth")," subfolder inside of it in the ",(0,o.kt)("inlineCode",{parentName:"p"},"geth-data")," folder you created (unless you changed the location of your data directory)."),(0,o.kt)("p",null,"Return to the root of your Base node folder and start your node."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"cd ..\ndocker compose up --build\n")),(0,o.kt)("p",null,"Your node should begin syncing from the last block in the snapshot."),(0,o.kt)("p",null,"Check the latest block to make sure you're syncing from the snapshot and that it restored correctly. If so, you can remove the snapshot archive that you downloaded."),(0,o.kt)("h3",{id:"syncing"},"Syncing"),(0,o.kt)("p",null,"You can monitor the progress of your sync with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'echo Latest synced block behind by: $((($(date +%s)-$( \\\n  curl -d \'{"id":0,"jsonrpc":"2.0","method":"optimism_syncStatus"}\' \\\n  -H "Content-Type: application/json" http://localhost:7545 | \\\n  jq -r .result.unsafe_l2.timestamp))/60)) minutes\n')),(0,o.kt)("p",null,"You'll also know that the sync hasn't completed if you get ",(0,o.kt)("inlineCode",{parentName:"p"},"Error: nonce has already been used")," if you try to deploy using your node."),(0,o.kt)("hr",null))}c.isMDXComponent=!0}}]);