"use strict";(self.webpackChunk_app_base_docs=self.webpackChunk_app_base_docs||[]).push([[3201],{82247:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>m});var a=t(14041);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(t),g=r,m=d["".concat(s,".").concat(g)]||d[g]||p[g]||o;return t?a.createElement(m,i(i({ref:n},c),{},{components:t})):a.createElement(m,i({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=g;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var u=2;u<o;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},18181:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var a=t(89575),r=(t(14041),t(82247));const o={title:"Generating random numbers contracts using Supra dVRF",slug:"/oracles-supra-vrf",description:"A tutorial that teaches how to use Supra dVRF to serve random numbers using an onchain randomness generation mechanism directly within your smart contracts on the Base testnet.",author:"taycaldwell",keywords:["Oracle Oracles","Supra","Supra VRF","Supra dVRF","VRF","verifiable random function","verifiable random functions","random numbers","rng","random number generator","random numbers in smart contracts","random numbers on Base","smart contract","Base blockchain","Base network","Base testnet","Base test network","app development","dapp development","build a dapp on Base","build on Base"],tags:["oracles","vrf"],difficulty:"intermediate",displayed_sidebar:null},i=void 0,l={unversionedId:"docs/oracles-supra-vrf",id:"docs/oracles-supra-vrf",title:"Generating random numbers contracts using Supra dVRF",description:"A tutorial that teaches how to use Supra dVRF to serve random numbers using an onchain randomness generation mechanism directly within your smart contracts on the Base testnet.",source:"@site/tutorials/docs/2_oracles-supra-vrf.md",sourceDirName:"docs",slug:"/oracles-supra-vrf",permalink:"/tutorials/oracles-supra-vrf",draft:!1,tags:[{label:"oracles",permalink:"/tutorials/tags/oracles"},{label:"vrf",permalink:"/tutorials/tags/vrf"}],version:"current",sidebarPosition:2,frontMatter:{title:"Generating random numbers contracts using Supra dVRF",slug:"/oracles-supra-vrf",description:"A tutorial that teaches how to use Supra dVRF to serve random numbers using an onchain randomness generation mechanism directly within your smart contracts on the Base testnet.",author:"taycaldwell",keywords:["Oracle Oracles","Supra","Supra VRF","Supra dVRF","VRF","verifiable random function","verifiable random functions","random numbers","rng","random number generator","random numbers in smart contracts","random numbers on Base","smart contract","Base blockchain","Base network","Base testnet","Base test network","app development","dapp development","build a dapp on Base","build on Base"],tags:["oracles","vrf"],difficulty:"intermediate",displayed_sidebar:null}},s={},u=[{value:"Objectives",id:"objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Foundry",id:"foundry",level:3},{value:"Coinbase Wallet",id:"coinbase-wallet",level:3},{value:"Wallet funds",id:"wallet-funds",level:3},{value:"Supra wallet registration",id:"supra-wallet-registration",level:3},{value:"What is a Verifiable Random Function (VRF)?",id:"what-is-a-verifiable-random-function-vrf",level:2},{value:"Creating a project",id:"creating-a-project",level:2},{value:"Writing the Smart Contract",id:"writing-the-smart-contract",level:2},{value:"Adding the Supra Router Contract interface",id:"adding-the-supra-router-contract-interface",level:3},{value:"Adding a request function",id:"adding-a-request-function",level:3},{value:"Adding a callback function",id:"adding-a-callback-function",level:3},{value:"Adding a function to view the result",id:"adding-a-function-to-view-the-result",level:3},{value:"Final smart contract code",id:"final-smart-contract-code",level:3},{value:"Compiling the Smart Contract",id:"compiling-the-smart-contract",level:2},{value:"Deploying the smart contract",id:"deploying-the-smart-contract",level:2},{value:"Setting up your wallet as the deployer",id:"setting-up-your-wallet-as-the-deployer",level:3},{value:"Setting up environment variables for Base Sepolia",id:"setting-up-environment-variables-for-base-sepolia",level:3},{value:"Deploying the smart contract to Base Sepolia",id:"deploying-the-smart-contract-to-base-sepolia",level:3},{value:"Interacting with the Smart Contract",id:"interacting-with-the-smart-contract",level:2},{value:"Conclusion",id:"conclusion",level:2}],c={toc:u},d="wrapper";function p(e){let{components:n,...t}=e;return(0,r.yg)(d,(0,a.A)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"This tutorial will guide you through the process of creating a smart contract on Base that utilizes Supra dVRF to serve random numbers using an onchain randomness generation mechanism directly within your smart contracts."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"objectives"},"Objectives"),(0,r.yg)("p",null,"By the end of this tutorial you should be able to do the following:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Set up a smart contract project for Base using Foundry"),(0,r.yg)("li",{parentName:"ul"},"Install the Supra dVRF as a dependency"),(0,r.yg)("li",{parentName:"ul"},"Use Supra dVRF within your smart contract"),(0,r.yg)("li",{parentName:"ul"},"Deploy and test your smart contracts on Base")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.yg)("h3",{id:"foundry"},"Foundry"),(0,r.yg)("p",null,"This tutorial requires you to have Foundry installed."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"From the command-line (terminal), run: ",(0,r.yg)("inlineCode",{parentName:"li"},"curl -L https://foundry.paradigm.xyz | bash")),(0,r.yg)("li",{parentName:"ul"},"Then run ",(0,r.yg)("inlineCode",{parentName:"li"},"foundryup"),", to install the latest (nightly) build of Foundry")),(0,r.yg)("p",null,"For more information, see the Foundry Book ",(0,r.yg)("a",{parentName:"p",href:"https://book.getfoundry.sh/getting-started/installation"},"installation guide"),"."),(0,r.yg)("h3",{id:"coinbase-wallet"},"Coinbase Wallet"),(0,r.yg)("p",null,"In order to deploy a smart contract, you will first need a wallet. You can create a wallet by downloading the Coinbase Wallet browser extension."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Download ",(0,r.yg)("a",{parentName:"li",href:"https://chrome.google.com/webstore/detail/coinbase-wallet-extension/hnfanknocfeofbddgcijnmhnfnkdnaad?hl=en"},"Coinbase Wallet"))),(0,r.yg)("h3",{id:"wallet-funds"},"Wallet funds"),(0,r.yg)("p",null,"Deploying contracts to the blockchain requires a gas fee. Therefore, you will need to fund your wallet with ETH to cover those gas fees."),(0,r.yg)("p",null,"For this tutorial, you will be deploying a contract to the Base Sepolia test network. You can fund your wallet with Base Sepolia ETH using one of the faucets listed on the Base ",(0,r.yg)("a",{parentName:"p",href:"https://docs.base.org/tools/network-faucets"},"Network Faucets")," page."),(0,r.yg)("h3",{id:"supra-wallet-registration"},"Supra wallet registration"),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"Supra dVRF V2 requires subscription to the service with a customer controlled wallet address to act as the main reference."),(0,r.yg)("p",{parentName:"admonition"},"Therefore you must register your wallet with the Supra team if you plan to consume Supra dVRF V2 within your smart contracts."),(0,r.yg)("p",{parentName:"admonition"},"Please refer to the ",(0,r.yg)("a",{parentName:"p",href:"https://supraoracles.com/docs/vrf/vrf-subscription-model-v2"},"Supra documentation")," for the latest steps on how to register your wallet for their service.")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"what-is-a-verifiable-random-function-vrf"},"What is a Verifiable Random Function (VRF)?"),(0,r.yg)("p",null,"A Verifiable Random Function (VRF) provides a solution for generating random outcomes in a manner that is both decentralized and verifiably recorded onchain. VRFs are crucial for applications where randomness integrity is paramount, such as in gaming or prize drawings."),(0,r.yg)("p",null,"Supra dVRF provides a decentralized VRF that ensures that the outcomes are not only effectively random but also responsive, scalable, and easily verifiable, thereby addressing the unique needs of onchain applications for trustworthy and transparent randomness."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"creating-a-project"},"Creating a project"),(0,r.yg)("p",null,"Before you can begin writing smart contracts for Base, you need to set up your development environment by creating a Foundry project."),(0,r.yg)("p",null,"To create a new Foundry project, first create a new directory:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"mkdir myproject\n")),(0,r.yg)("p",null,"Then run:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cd myproject\nforge init\n")),(0,r.yg)("p",null,"This will create a Foundry project, which has the following basic layout:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},".\n\u251c\u2500\u2500 foundry.toml\n\u251c\u2500\u2500 script\n \u2502   \u2514\u2500\u2500 Counter.s.sol\n\u251c\u2500\u2500 src\n \u2502   \u2514\u2500\u2500 Counter.sol\n\u2514\u2500\u2500 test\n    \u2514\u2500\u2500 Counter.t.sol\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"writing-the-smart-contract"},"Writing the Smart Contract"),(0,r.yg)("p",null,"Once your Foundry project has been created, you can now start writing a smart contract."),(0,r.yg)("p",null,"The Solidity code below defines a basic contract named ",(0,r.yg)("inlineCode",{parentName:"p"},"RNGContract"),". The smart contract's constructor takes in a single ",(0,r.yg)("inlineCode",{parentName:"p"},"address")," and assigns it to a member variable named ",(0,r.yg)("inlineCode",{parentName:"p"},"supraAddr"),". This address corresponds to the ",(0,r.yg)("a",{parentName:"p",href:"https://supraoracles.com/docs/vrf/networks/"},"contract address")," of the Supra Router Contract that will be used to generate random numbers. The contract address of the Supra Router Contract on Base Sepolia testnet is ",(0,r.yg)("inlineCode",{parentName:"p"},"0x99a021029EBC90020B193e111Ae2726264a111A2"),"."),(0,r.yg)("p",null,"The contract also assigns the contract deployer (",(0,r.yg)("inlineCode",{parentName:"p"},"msg.sender"),") to a member variable named ",(0,r.yg)("inlineCode",{parentName:"p"},"supraClientAddress"),". This should be the client wallet address that is registered and whitelisted to use Supra VRF (see: ",(0,r.yg)("a",{parentName:"p",href:"#prerequisites"},"Prerequisites"),")."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-solidity"},"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\ncontract RNGContract {\n    address supraAddr;\n    address supraClientAddress;\n\n    constructor(address supraSC) {\n        supraAddr = supraSC;\n        supraClientAddress = msg.sender;\n    }\n}\n")),(0,r.yg)("p",null,"In your project, add the code provided above to a new file named ",(0,r.yg)("inlineCode",{parentName:"p"},"src/ExampleContract.sol"),", and delete the ",(0,r.yg)("inlineCode",{parentName:"p"},"src/Counter.sol")," contract that was generated with the project. (you can also delete the ",(0,r.yg)("inlineCode",{parentName:"p"},"test/Counter.t.sol")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"script/Counter.s.sol")," files)."),(0,r.yg)("p",null,"The following sections will guide you step-by-step on how to update your contract to generate random numbers using the Supra Router contract."),(0,r.yg)("h3",{id:"adding-the-supra-router-contract-interface"},"Adding the Supra Router Contract interface"),(0,r.yg)("p",null,"In order to help your contract (the requester contract) interact with the Supra Router contract and understand what methods it can call, you will need to add the following interface to your contract file."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-solidity"},"interface ISupraRouter {\n    function generateRequest(string memory _functionSig, uint8 _rngCount, uint256 _numConfirmations, uint256 _clientSeed, address _clientWalletAddress) external returns(uint256);\n    function generateRequest(string memory _functionSig, uint8 _rngCount, uint256 _numConfirmations, address _clientWalletAddress) external returns(uint256);\n}\n")),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"ISupraRouter")," interface defines a ",(0,r.yg)("inlineCode",{parentName:"p"},"generateRequest")," function. This function is used to create a request for random numbers. The ",(0,r.yg)("inlineCode",{parentName:"p"},"generateRequest")," function is defined twice, because one of the definitions allows for an optional ",(0,r.yg)("inlineCode",{parentName:"p"},"_clientSeed")," (defaults to ",(0,r.yg)("inlineCode",{parentName:"p"},"0"),") for additional unpredictability."),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"Alternatively, you can add the ",(0,r.yg)("inlineCode",{parentName:"p"},"ISupraRouter")," interface in a separate interface file and inherit the interface in your contract.")),(0,r.yg)("h3",{id:"adding-a-request-function"},"Adding a request function"),(0,r.yg)("p",null,"Once you have defined the ",(0,r.yg)("inlineCode",{parentName:"p"},"ISupraRouter"),", you are ready to add the logic to your smart contract for requesting random numbers."),(0,r.yg)("p",null,"For Supra dVRF, adding logic for requesting random numbers requires two functions:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"A request function"),(0,r.yg)("li",{parentName:"ul"},"A callback function")),(0,r.yg)("p",null,"The request function is a custom function defined by the developer. There are no requirements when it comes to the signature of the request function."),(0,r.yg)("p",null,"The following code is an example of a request function named ",(0,r.yg)("inlineCode",{parentName:"p"},"rng")," that requests random numbers using the Supra Router Contract. Add this function to your smart contract:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-solidity"},'function rng() external returns (uint256) {\n    // Amount of random numbers to request\n    uint8 rngCount = 5;\n    // Amount of confirmations before the request is considered complete/final\n    uint256 numConfirmations = 1;\n    uint256 nonce = ISupraRouter(supraAddr).generateRequest(\n        "requestCallback(uint256,uint256[])",\n        rngCount,\n        numConfirmations,\n        supraClientAddress\n    );\n    return nonce;\n    // store nonce if necessary (e.g., in a hashmap)\n    // this can be used to track parameters related to the request in a lookup table\n    // these can be accessed inside the callback since the response from supra will include the nonce\n}\n')),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"rng")," function above requests ",(0,r.yg)("inlineCode",{parentName:"p"},"5")," random numbers (defined by ",(0,r.yg)("inlineCode",{parentName:"p"},"rngCount"),"), and waits ",(0,r.yg)("inlineCode",{parentName:"p"},"1")," confirmation (defined by ",(0,r.yg)("inlineCode",{parentName:"p"},"numConfirmations"),") before considering the result to be final. It makes this request by calling the ",(0,r.yg)("inlineCode",{parentName:"p"},"generateRequest")," function of the Supra Router contract, while providing a callback function with the signature ",(0,r.yg)("inlineCode",{parentName:"p"},"requestCallback(uint256,uint256[])"),"."),(0,r.yg)("h3",{id:"adding-a-callback-function"},"Adding a callback function"),(0,r.yg)("p",null,"As seen in the previous section, the ",(0,r.yg)("inlineCode",{parentName:"p"},"generateRequest")," method of the Supra Router contract expects a signature for a callback function. This callback function must be of the form: ",(0,r.yg)("inlineCode",{parentName:"p"},"uint256 nonce, uint256[] calldata rngList"),", and must include validation code, such that only the Supra Router contract can call the function."),(0,r.yg)("p",null,"To do this, add the following callback function (",(0,r.yg)("inlineCode",{parentName:"p"},"requestCallback"),") to your smart contract:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-solidity"},'function requestCallback(uint256 _nonce ,uint256[] _rngList) external {\n    require(msg.sender == supraAddr, "Only the Supra Router can call this function.");\n    uint8 i = 0;\n    uint256[] memory x = new uint256[](rngList.length);\n    rngForNonce[nonce] = x;\n    for(i=0; i<rngList.length;i++){\n        rngForNonce[nonce][i] = rngList[i] % 100;\n    }\n}\n')),(0,r.yg)("p",null,"Once a random number is generated, ",(0,r.yg)("inlineCode",{parentName:"p"},"requestCallback")," is executed by the Supra Router. The code above stores the resulting random numbers list in a map named ",(0,r.yg)("inlineCode",{parentName:"p"},"rngForNonce")," using the ",(0,r.yg)("inlineCode",{parentName:"p"},"_nonce")," argument. Because of this, you will need to add the following mapping to your contract:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-solidity"},"mapping (uint256 => uint256[] ) rngForNonce;\n")),(0,r.yg)("h3",{id:"adding-a-function-to-view-the-result"},"Adding a function to view the result"),(0,r.yg)("p",null,"To fetch resulting random numbers based on their associated ",(0,r.yg)("inlineCode",{parentName:"p"},"nonce"),", you add a third function:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-solidity"},"function viewRngForNonce(uint256 nonce) external view returns (uint256[] memory) {\n    return rngForNonce[nonce];\n}\n")),(0,r.yg)("h3",{id:"final-smart-contract-code"},"Final smart contract code"),(0,r.yg)("p",null,"After following all the steps above, your smart contract code should look like the following:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-solidity"},'// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\ninterface ISupraRouter {\n    function generateRequest(string memory _functionSig, uint8 _rngCount, uint256 _numConfirmations, uint256 _clientSeed, address _clientWalletAddress) external returns (uint256);\n    function generateRequest(string memory _functionSig, uint8 _rngCount, uint256 _numConfirmations, address _clientWalletAddress) external returns (uint256);\n}\n\ncontract RNGContract {\n    address supraAddr;\n    address supraClientAddress;\n\n    mapping (uint256 => uint256[]) rngForNonce;\n\n    constructor(address supraSC) {\n        supraAddr = supraSC;\n        supraClientAddress = msg.sender;\n    }\n\n    function rng() external returns (uint256) {\n        // Amount of random numbers to request\n        uint8 rngCount = 5;\n        // Amount of confirmations before the request is considered complete/final\n        uint256 numConfirmations = 1;\n        uint256 nonce = ISupraRouter(supraAddr).generateRequest(\n            "requestCallback(uint256,uint256[])",\n            rngCount,\n            numConfirmations,\n            supraClientAddress\n        );\n        return nonce;\n    }\n\n    function requestCallback(uint256 _nonce, uint256[] memory _rngList) external {\n        require(msg.sender == supraAddr, "Only the Supra Router can call this function.");\n        uint8 i = 0;\n        uint256[] memory x = new uint256[](_rngList.length);\n        rngForNonce[_nonce] = x;\n        for (i = 0; i < _rngList.length; i++) {\n            rngForNonce[_nonce][i] = _rngList[i] % 100;\n        }\n    }\n\n    function viewRngForNonce(uint256 nonce) external view returns (uint256[] memory) {\n        return rngForNonce[nonce];\n    }\n}\n')),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"You must whitelist this smart contract under the wallet address you registered with Supra, and deposit funds to be paid for the gas fees associated with transactions for your callback function."),(0,r.yg)("p",{parentName:"admonition"},"Follow the ",(0,r.yg)("a",{parentName:"p",href:"https://supraoracles.com/docs/vrf/v2-guide#step-1-create-the-supra-router-contract-interface-1"},"guidance steps")," provided by Supra for whitelisting your contract and depositing funds."),(0,r.yg)("p",{parentName:"admonition"},"If you have not yet registered your wallet with Supra, see the ",(0,r.yg)("a",{parentName:"p",href:"#prerequisites"},"Prerequisites")," section.")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"compiling-the-smart-contract"},"Compiling the Smart Contract"),(0,r.yg)("p",null,"To compile your smart contract code, run:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"forge build\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"deploying-the-smart-contract"},"Deploying the smart contract"),(0,r.yg)("h3",{id:"setting-up-your-wallet-as-the-deployer"},"Setting up your wallet as the deployer"),(0,r.yg)("p",null,"Before you can deploy your smart contract to the Base network, you will need to set up a wallet to be used as the deployer."),(0,r.yg)("p",null,"To do so, you can use the ",(0,r.yg)("a",{parentName:"p",href:"https://book.getfoundry.sh/reference/cast/cast-wallet-import"},(0,r.yg)("inlineCode",{parentName:"a"},"cast wallet import"))," command to import the private key of the wallet into Foundry's securely encrypted keystore:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cast wallet import deployer --interactive\n")),(0,r.yg)("p",null,"After running the command above, you will be prompted to enter your private key, as well as a password for signing transactions."),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"For instructions on how to get your private key from Coinbase Wallet, visit the ",(0,r.yg)("a",{parentName:"p",href:"https://docs.cloud.coinbase.com/wallet-sdk/docs/developer-settings#show-private-key"},"Coinbase Wallet documentation"),"."),(0,r.yg)("p",{parentName:"admonition"},(0,r.yg)("strong",{parentName:"p"},"It is critical that you do NOT commit this to a public repo"),".")),(0,r.yg)("p",null,"To confirm that the wallet was imported as the ",(0,r.yg)("inlineCode",{parentName:"p"},"deployer")," account in your Foundry project, run:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cast wallet list\n")),(0,r.yg)("h3",{id:"setting-up-environment-variables-for-base-sepolia"},"Setting up environment variables for Base Sepolia"),(0,r.yg)("p",null,"To setup your environment for deploying to the Base network, create an ",(0,r.yg)("inlineCode",{parentName:"p"},".env")," file in the home directory of your project, and add the RPC URL for the Base Sepolia testnet, as well as the Supra Router contract address for Base Sepolia testnet:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'BASE_SEPOLIA_RPC="https://sepolia.base.org"\nISUPRA_ROUTER_ADDRESS=0x99a021029EBC90020B193e111Ae2726264a111A2\n')),(0,r.yg)("p",null,"Once the ",(0,r.yg)("inlineCode",{parentName:"p"},".env")," file has been created, run the following command to load the environment variables in the current command line session:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"source .env\n")),(0,r.yg)("h3",{id:"deploying-the-smart-contract-to-base-sepolia"},"Deploying the smart contract to Base Sepolia"),(0,r.yg)("p",null,"With your contract compiled and environment setup, you are ready to deploy the smart contract to the Base Sepolia Testnet!"),(0,r.yg)("p",null,"For deploying a single smart contract using Foundry, you can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"forge create")," command. The command requires you to specify the smart contract you want to deploy, an RPC URL of the network you want to deploy to, and the account you want to deploy with."),(0,r.yg)("p",null,"To deploy the ",(0,r.yg)("inlineCode",{parentName:"p"},"RNGContract")," smart contract to the Base Sepolia test network, run the following command:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"forge create ./src/RNGContract.sol:RNGContract --rpc-url $BASE_SEPOLIA_RPC --constructor-args $ISUPRA_ROUTER_ADDRESS --account deployer\n")),(0,r.yg)("p",null,"When prompted, enter the password that you set earlier, when you imported your wallet\u2019s private key."),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"Your wallet must be funded with ETH on the Base Sepolia Testnet to cover the gas fees associated with the smart contract deployment. Otherwise, the deployment will fail."),(0,r.yg)("p",{parentName:"admonition"},"To get testnet ETH for Base Sepolia, see the ",(0,r.yg)("a",{parentName:"p",href:"#prerequisites"},"prerequisites"),".")),(0,r.yg)("p",null,"After running the command above, the contract will be deployed on the Base Sepolia test network. You can view the deployment status and contract by using a ",(0,r.yg)("a",{parentName:"p",href:"/tools/block-explorers"},"block explorer"),"."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"interacting-with-the-smart-contract"},"Interacting with the Smart Contract"),(0,r.yg)("p",null,"Foundry provides the ",(0,r.yg)("inlineCode",{parentName:"p"},"cast")," command-line tool that can be used to interact with the smart contract that was deployed and call the ",(0,r.yg)("inlineCode",{parentName:"p"},"getLatestPrice()")," function to fetch the latest price of ETH."),(0,r.yg)("p",null,"To call the ",(0,r.yg)("inlineCode",{parentName:"p"},"getLatestPrice()")," function of the smart contract, run:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'cast call <DEPLOYED_ADDRESS> --rpc-url $BASE_SEPOLIA_RPC "rng()"\n')),(0,r.yg)("p",null,"You should receive a ",(0,r.yg)("inlineCode",{parentName:"p"},"nonce")," value."),(0,r.yg)("p",null,"You can use this ",(0,r.yg)("inlineCode",{parentName:"p"},"nonce")," value to call the ",(0,r.yg)("inlineCode",{parentName:"p"},"viewRngForNonce(uint256)")," function to get the resulting list of randomly generated numbers:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'cast call <DEPLOYED_ADDRESS> --rpc-url $BASE_SEPOLIA_RPC "viewRngForNonce(uint256)" <NONCE>\n')),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"conclusion"},"Conclusion"),(0,r.yg)("p",null,"Congratulations! You have successfully deployed and interacted with a smart contract that generates a list of random numbers using Supra dVRF on the Base blockchain network."),(0,r.yg)("p",null,"To learn more about VRF and using Supra dVRF to generate random numbers within your smart contracts on Base, check out the following resources:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://docs.base.org/tools/oracles"},"Oracles")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://supraoracles.com/docs/vrf/v2-guide"},"Supra dVRF - Developer Guide V2"))))}p.isMDXComponent=!0}}]);